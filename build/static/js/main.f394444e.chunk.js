(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),o=t(17),a=t.n(o),u=t(8),i=t(3),s=t(0),l=function(e){var n=e.personManagement,t=e.newName,c=e.newNumber,r=e.handleNameChange,o=e.handleNumberChange;return Object(s.jsx)("div",{children:Object(s.jsx)("form",{onSubmit:n,children:Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:r}),Object(s.jsx)("br",{}),"number: ",Object(s.jsx)("input",{value:c,onChange:o}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{type:"submit",children:"add"})]})})})},d=function(e){var n=e.person,t=e.removePerson;return Object(s.jsxs)("p",{children:[n.name," ",n.number,Object(s.jsx)("button",{onClick:t,children:" delete "})]})},j=function(e){var n=e.handleFindChange;return Object(s.jsxs)("div",{children:["filter shown with",Object(s.jsx)("input",{onChange:n})]})},b=t(4),f=t.n(b),h="/api/persons",m=function(){return f.a.get(h).then((function(e){return e.data}))},O=function(e){return f.a.post(h,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.error;return null===n?null:t?Object(s.jsxs)("div",{className:"error",children:[" ",n," "]}):Object(s.jsxs)("div",{className:"notification",children:[" ",n," "]})},g=function(e){var n=e.message;return null===n?null:Object(s.jsxs)("div",{className:"error",children:[" ",n," "]})},w=function(){var e=Object(c.useState)(""),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),a=Object(i.a)(o,2),b=a[0],f=a[1],h=Object(c.useState)(""),w=Object(i.a)(h,2),C=w[0],N=w[1],k=Object(c.useState)([]),S=Object(i.a)(k,2),T=S[0],y=S[1],D=Object(c.useState)(null),M=Object(i.a)(D,2),P=M[0],A=M[1],E=Object(c.useState)(null),F=Object(i.a)(E,2),J=F[0],L=F[1];Object(c.useEffect)((function(){m().then((function(e){y(e)}))}),[]);var B=function(){O({name:b,number:C}).then((function(e){y(T.concat(e)),A("Added ".concat(b)),setTimeout((function(){A(null)}),2e3),f(""),N("")}))},I=function(e){var n=T.find((function(n){return n.id===e})),t=Object(u.a)(Object(u.a)({},n),{},{number:C});v(e,t).then((function(n){y(T.map((function(t){return t.id!==e?t:n})))})),A("".concat(n.name," number modified")),setTimeout((function(){A(null)}),2e3),f(""),N("")},R=t.length<1?T:T.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(x,{message:P}),Object(s.jsx)(g,{message:J}),Object(s.jsx)(j,{handleFindChange:function(e){r(e.target.value)}}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(l,{persons:T,newName:b,newNumber:C,personManagement:function(e){if(T.some((function(e){return e.name===b}))){if(e.preventDefault(),window.confirm("".concat(b," is already added to notebook, replace the old number with a new one?"))){var n=T.find((function(e){return e.name===b}));return I(n.id)}return console.log("Clicked cancel")}e.preventDefault(),B()},handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){console.log(e.target.value),N(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("div",{children:R.map((function(e,n){return Object(s.jsx)(d,{person:e,removePerson:function(){return function(e){var n=T.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&p(e).then((function(t){y(T.filter((function(n){return n.id!==e}))),A("Removed ".concat(n.name)),setTimeout((function(){A(null)}),2e3)})).catch((function(e){L("This person is not saved to the server"),setTimeout((function(){L(null)}),2e3),console.log(e)}))}(e.id)}},n)}))})]})};t(41);a.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f394444e.chunk.js.map